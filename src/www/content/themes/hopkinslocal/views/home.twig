{% extends "_base.twig" %}

{% block head %}
<style type="text/css">
  {% if posts|length %}
    {% for item in posts %}
      #action-{{ item.id }} {
        background-image: url('{{ item.thumbnail.src|resize(500, 500) }}');
        filter: progid:DXImageTransform.Microsoft.AlphaImageLoader(src='{{ item.thumbnail.src|resize(500, 500) }}', sizingMethod='scale');
        -ms-filter: "progid:DXImageTransform.Microsoft.AlphaImageLoader(src='{{ item.thumbnail.src|resize(500, 500) }}', sizingMethod='scale')
      }
    {% endfor %}
  {% endif %}
</style>
{% endblock %}

{% block content %}
  <div class="page-hero">
    <div class="container">
      <header class="masthead" role="banner">
        <div class="masthead-brand">
          <a class="masthead-logo" href="/" title="Johns Hopkins University &amp; Medical">Johns Hopkins University &amp; Medical</a>
        </div>

        <nav role="navigation">
          <ul class="masthead-nav">
            {% for item in primary.get_items %}
              <li class="masthead-nav-item">
                <a class="masthead-nav-link {{ item.classes|join(' ') }}" href="{{ item.get_link }}" title="{{ item.title }}">{{ item.title }}</a>
              </li>
            {% endfor %}
            <li class=masthead-nav-item>
              <a class=masthead-nav-link id=js-show-about href=/about title="About with Baltimore and Area Businesses">About</a> </li>
          </ul>
        </nav>
      </header>
      <div class="hopkins-local">
        <h1 class="hopkins-local-mark" id="js-fit-local">
            <span style="">Hopkins </span>
            <strong class="hopkins-local-emphasis" style="">Local
            <span class="hopkins-local-tagline" style="display: block; font-size: .359em">Build. Hire. Buy.</span></strong>
        </h1>

      </div>
    </div>
  </div>


  <div class="container">
    <div class="page-intro">
      <h2 class="page-intro-heading">
        {{ post.page_heading }}
      </h2>
      <div class="page-intro-content">
        {{ post.content }}

      </div>
      <div class="page-intro-video">
        <a class="page-intro-videolink" id="js-video-gallery" href="{{ post.video_link_url }}" title="">
            <img class="page-intro-videolink-image" src="{{site.theme.link}}/images/play-video.jpg" alt="{{ post.video_link_text }}">
            <strong class="page-intro-videolink-text">{{ post.video_link_text }}</strong>
        </a>
      </div>
    </div>
  </div>


  <div class="content-blocks">
  <h2 class="content-blocks-header">
    HopkinsLocal in Action
  </h2>
  {% if posts|length %}
    {% for item in posts|slice(0,1) %}
    {% if item.associated_program|length %}
    {% set blockClass = 'block-stack-' ~ item.associated_program %}
    {% else %}
        {% set blockClass = '' %}
    {% endif %}
    <div class="content-blocks-columns-1">
      {% if item.story_url|length %}
      <a class="block-stack {{ blockClass }}" id="action-{{ item.id }}" href="{{ item.story_url }}" style="background-image: url('{{ item.thumbnail.src|resize(500, 500) }}');" target="_blank" data-analytics-event="news, click, {{ item.story_url|e('html_attr') }}">
        <h2 class="block-stack-heading">
          {% if item.post_excerpt|length %}
            {{ item.post_excerpt }}
          {% else %}
            {{ item.title }}
          {% endif %}
        </h2>
      </a>
      {% else %}
      <div class="block-stack {{ blockClass }}" id="action-{{ item.id }}" style="background-image: url('{{ item.thumbnail.src|resize(500, 500) }}');" target="_blank">
        <h2 class="block-stack-heading">
          {% if item.post_excerpt|length %}
            {{ item.post_excerpt }}
          {% else %}
            {{ item.title }}
          {% endif %}
        </h2>
      </div>
      {% endif %}
    </div>
    {% endfor %}

    <div class="content-blocks-columns-2">
    {% for item in posts|slice(1,2) %}
      {% if item.associated_program|length %}
      {% set blockClass = 'block-stack-' ~ item.associated_program %}
      {% else %}
      {% set blockClass = '' %}
      {% endif %}
      {% if item.story_url|length %}
      <a class="block-stack {{ blockClass }}" id="action-{{ item.id }}" href="{{ item.story_url }}" style="background-image: url('{{ item.thumbnail.src|resize(500, 500) }}');" target="_blank" data-analytics-event="news, click, {{ item.story_url|e('html_attr') }}">
        <h2 class="block-stack-heading">
          {% if item.post_excerpt|length %}
            {{ item.post_excerpt }}
          {% else %}
            {{ item.title }}
          {% endif %}
        </h2>
      </a>
      {% else %}
      <div class="block-stack {{ blockClass }}" id="action-{{ item.id }}" style="background-image: url('{{ item.thumbnail.src|resize(500, 500) }}');" target="_blank">
        <h2 class="block-stack-heading">
          {% if item.post_excerpt|length %}
            {{ item.post_excerpt }}
          {% else %}
            {{ item.title }}
          {% endif %}
        </h2>
      </div>
      {% endif %}
    {% endfor %}
    </div>

    <div class="content-blocks-columns-2">
    {% for item in posts|slice(3,2) %}
    {% if item.associated_program|length %}
    {% set blockClass = 'block-stack-' ~ item.associated_program %}
    {% else %}
        {% set blockClass = '' %}
    {% endif %}
    {% if item.story_url|length %}
    <a class="block-stack {{ blockClass }}" id="action-{{ item.id }}" href="{{ item.story_url }}" style="background-image: url('{{ item.thumbnail.src|resize(500, 500) }}');" target="_blank" data-analytics-event="news, click, {{ item.story_url|e('html_attr') }}">
      <h2 class="block-stack-heading">
        {% if item.post_excerpt|length %}
            {{ item.post_excerpt }}
          {% else %}
            {{ item.title }}
          {% endif %}
      </h2>
    </a>
    {% else %}
    <div class="block-stack {{ blockClass }}" id="action-{{ item.id }}" style="background-image: url('{{ item.thumbnail.src|resize(500, 500) }}');" target="_blank">
      <h2 class="block-stack-heading">
        {% if item.post_excerpt|length %}
            {{ item.post_excerpt }}
          {% else %}
            {{ item.title }}
          {% endif %}
      </h2>
    </div>
    {% endif %}
    {% endfor %}
    </div>
  {% endif %}
  </div> <!-- /.content-blocks -->


  {% if focuses|length %}
  <div class="focuses">
    <div class="focuses-canister">
    {% for focus in focuses %}
      <div class="focus-item focus-item-{{ focus.slug }}">
        <h2 class="focus-item-heading">{{ focus.title}}</h2>
        <div class="focus-item-content">
          <img class="focus-item-src" src="{{ focus.thumbnail.src }}" alt="">
          <div class="focus-item-text">{{ focus.page_excerpt|wpautop }}</div>

          <a class="focus-link-more" href="{{ focus.link }}" title="Learn More">
            Learn More
          </a>
        </div>

      </div>
      <!-- /.focus-item-{{ focus.slug }} -->
    {% endfor %}
    </div>
  </div>
  {% endif %}

  <div class="quote">
    <div class="container">
      <div class="block-quote">
        <blockquote class="block-quote-text">
          {{ post.quote_text|wpautop }}
          <div class="block-quote-sources">
            {% for source in post.get_field('quote_sources') %}
            <p class="block-quote-source">
              {{ source.source_name }}
              <span class="block-quote-source-position">{{ source.source_position}}</span>
            </p>
            {% endfor %}
          </div>
        </blockquote>
      </div>
    </div>
  </div>
{% endblock %}
